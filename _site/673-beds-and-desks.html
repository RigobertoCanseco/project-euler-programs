<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>673 Beds And Desks</title>

  <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="673 Beds And Desks" />
<meta name="author" content="Rigoberto Canseco" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Problem 673 https://projecteuler.net/problem=673" />
<meta property="og:description" content="Problem 673 https://projecteuler.net/problem=673" />
<link rel="canonical" href="http://localhost:4000/project-euler-problems/673-beds-and-desks.html" />
<meta property="og:url" content="http://localhost:4000/project-euler-problems/673-beds-and-desks.html" />
<meta property="og:site_name" content="Project Euler" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-02-11T00:00:00-06:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"673 Beds And Desks","dateModified":"2021-02-11T00:00:00-06:00","datePublished":"2021-02-11T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/project-euler-problems/673-beds-and-desks.html"},"author":{"@type":"Person","name":"Rigoberto Canseco"},"description":"Problem 673 https://projecteuler.net/problem=673","url":"http://localhost:4000/project-euler-problems/673-beds-and-desks.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/project-euler-problems/feed.xml" title="Project Euler" />

  <link rel="shortcut icon" type="image/x-icon" href="/project-euler-problems/logo.png" />
  <link rel="stylesheet" href="/project-euler-problems/assets/css/main.css" />
  <link rel="stylesheet" href="/project-euler-problems/assets/css/syntax.css" type="text/css" /><script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true,
    },
    CommonHTML: {
      scale: 70,
    }
  });
</script>
<script type="text/javascript" async
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body a="auto">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/project-euler-problems/"><=</a>

<article>
  <h1>673 Beds And Desks</h1>

  <p><strong>Problem 673</strong><br />
<a href="https://projecteuler.net/problem=673">https://projecteuler.net/problem=673</a></p>

<p>At Euler University, each of the $n$ students (numbered from 1 to $n$) occupies a bed in the dormitory and uses a desk in the classroom.</p>

<p>Some of the beds are in private rooms which a student occupies alone, while the others are in double rooms occupied by two students as roommates. Similarly, each desk is either a single desk for the sole use of one student, or a twin desk at which two students sit together as desk partners.</p>

<p>We represent the bed and desk sharing arrangements each by a list of pairs of student numbers. For example, with $n=4$, if $(2,3)$ represents the bed pairing and $(1,3)(2,4)$ the desk pairing, then students 2 and 3 are roommates while 1 and 4 have single rooms, and students 1 and 3 are desk partners, as are students 2 and 4.</p>

<p>The new chancellor of the university decides to change the organisation of beds and desks: a permutation $\sigma$ of the numbers $1,2,\ldots,n$ will be chosen, and each student $k$ will be given both the bed and the desk formerly occupied by student number $\sigma(k)$.</p>

<p>The students agree to this change, under the conditions that:</p>
<ol>
<li>Any two students currently sharing a room will still be roommates.</li>
<li>Any two students currently sharing a desk will still be desk partners.</li>
</ol>

<p>In the example above, there are only two ways to satisfy these conditions: either take no action ($\sigma$ is the <b>identity permutation</b>), or reverse the order of the students.</p>

<p>With $n=6$, for the bed pairing $(1,2)(3,4)(5,6)$ and the desk pairing $(3,6)(4,5)$, there are 8 permutations which satisfy the conditions. One example is the mapping $(1, 2, 3, 4, 5, 6) \mapsto (1, 2, 5, 6, 3, 4)$.</p>

<p>With $n=36$, if we have bed pairing:<br />
$(2,13)(4,30)(5,27)(6,16)(10,18)(12,35)(14,19)(15,20)(17,26)(21,32)(22,33)(24,34)(25,28)$<br />
and desk pairing<br />
$(1,35)(2,22)(3,36)(4,28)(5,25)(7,18)(9,23)(13,19)(14,33)(15,34)(20,24)(26,29)(27,30)$<br />
then among the $36!$ possible permutations (including the identity permutation), 663552 of them satisfy the conditions stipulated by the students.</p>

<p>The downloadable text files <a href="https://projecteuler.net/project/resources/p673_beds.txt">beds.txt</a> and <a href="https://projecteuler.net/project/resources/p673_desks.txt">desks.txt</a> contain pairings for $n=500$. Each pairing is written on its own line, with the student numbers of the two roommates (or desk partners) separated with a comma. For example, the desk pairing in the $n=4$ example above would be represented in this file format as:</p>
<pre>
1,3
2,4
</pre>
<p>With these pairings, find the number of permutations that satisfy the students' conditions. Give your answer modulo $999\,999\,937$.</p>

<hr />

</article>
      </div>
    </main>
    
  </body>
</html>